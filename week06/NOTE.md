# 每周总结可以写在这里

## 浏览器工作原理 | 有限状态机

### 笔记

有限状态机

```js
// 每个函数是一个状态
function state(input) {
  // 处理该状态的逻辑
  return next; // 返回下一个状态，next是固定的就是摩尔型状态机，和input有关就是米利型
}

// 调用
while(input) {
  // 获取输入
  state = state(input); // 把状态置为下一个状态
}
```



每个函数是一个状态

摩尔型和米利型

aabcdef



作业：Abababx

可选：

Match(pattern, 'xxxxxxxxxxx');

字符串kmp。时间复杂度，O(m+n)

提示：状态可能是生成的，闭包



### 小结

## 浏览器工作原理 | HTTP协议+语法与词法分析（三）

### 笔记

标签处理

属性处理

属性值有单引号、双引号和无引号三种写法，因此需要多状态处理

### 小结

## 浏览器工作原理 | CSS计算，排版,渲染，合成（一）

### 笔记

#### 收集css规则

- 遇到style标签时把css规则保存起来

- 调用css Parser来分析css规则（引入css模块，把字符串转成css的ast）

- 需要注意该库分析css规则的格式

#### 添加调用

- 当我们创建一个元素后，立即计算css
- 理论上，当我们分析一个元素时，所有css规则一件收集完毕
- 写在body里的style标签，需要重新计算css 

#### 获取父元素序列

- 在computeCSS函数中，我们必须知道元素的所有父元素才能判断元素是否与规则匹配
- 从上一步骤产生的stack（堆）,可以获取本元素所有的父元素
- 因为我们首先获取的事“当前元素”，所以我们获得和计算父元素的顺序是从内到外的

#### 拆分选择器

#### 计算选择器与元素匹配关系

#### 生成computed属性

### 小结